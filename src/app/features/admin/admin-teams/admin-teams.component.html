<div class="admin-container">
  <h1>üèÜ Gestion des √âquipes</h1>

  <div class="form-card">
    <h2>{{ editMode ? "Modifier" : "Cr√©er" }} une √©quipe</h2>
    <form [formGroup]="teamForm" (ngSubmit)="onSubmit()">
      <div class="form-row">
        <div class="form-group">
          <label>Nom de l'√©quipe *</label>
          <input type="text" formControlName="name" placeholder="Team Alpha" />
        </div>

        <div class="form-group">
          <label>R√©gion *</label>
          <input
            type="text"
            formControlName="region"
            placeholder="EU, NA, KR..."
          />
        </div>
      </div>

      <div class="form-group">
        <label>Logo de l'√©quipe (optionnel)</label>
        <input type="file" (change)="onFileSelected($event)" accept="image/*" />
        <small
          >Si vous ne t√©l√©chargez pas de logo, un logo par d√©faut sera
          utilis√©.</small
        >
      </div>

      @if (previewUrl) {
      <div class="preview">
        <img [src]="previewUrl" alt="Preview" />
      </div>
      }

      <div class="form-actions">
        <button
          type="submit"
          class="btn-primary"
          [disabled]="teamForm.invalid || loading"
        >
          {{ loading ? "Chargement..." : editMode ? "Modifier" : "Cr√©er" }}
        </button>
        @if (editMode) {
        <button type="button" class="btn-secondary" (click)="cancelEdit()">
          Annuler
        </button>
        }
      </div>
    </form>
  </div>

  <div class="table-card">
    <h2>Liste des √©quipes ({{ teams().length }})</h2>
    <div class="table-responsive">
      <table>
        <thead>
          <tr>
            <th>Logo</th>
            <th>Nom</th>
            <th>R√©gion</th>
            <th>Victoires</th>
            <th>D√©faites</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          @for (team of teams(); track team.id) {
          <tr>
            <td>
              <img [src]="team.logo_url" [alt]="team.name" class="team-logo" />
            </td>
            <td>
              <strong>{{ team.name }}</strong>
            </td>
            <td>
              <span class="region-badge">{{ team.region }}</span>
            </td>
            <td class="wins">{{ team.wins }}</td>
            <td class="losses">{{ team.losses }}</td>
            <td>
              <button
                class="btn-icon"
                (click)="editTeam(team)"
                title="Modifier"
              >
                ‚úèÔ∏è
              </button>
              <button
                class="btn-icon danger"
                (click)="deleteTeam(team)"
                title="Supprimer"
              >
                üóëÔ∏è
              </button>
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>
